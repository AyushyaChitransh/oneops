if (!window.toggle_rfc_tab) {
  window.toggle_rfc_tab = function (source, key, tabName, fromCache) {
    source = $j(source);
    var ul = source.parents(".accordion-toggle").find('.nav'),
      contentDiv = source.parents(".accordion-group").find(".accordion-inner"),
      tab = contentDiv.find(".tab-pane.rfc-" + tabName);
    ul.find("li").removeClass('active');
    if (tab.is(":visible")) {
      contentDiv.hide(300);
    }
    else {
      source.parent("li").addClass('active');
      contentDiv.find("> .tab-pane").hide();
      tab.show();
      contentDiv.show(300);
      var html = tab.html();
      if (!html || !html.trim()) {
        if (tabName == 'changes') {
          if (fromCache) {
            tab.html($j("#rfc_attr_cache_" + key).html());
            tab.find(".diff-container").prettyTextDiff({cleanup: true, diffContainer: ".changed"});
          }
          else {
            tab.html('<%= escape_javascript(loading_indicator) %>');
            $j.get(source.parents("[data-changes-url]").data('changes-url'), {rfcId: key});
          }
        }
        else if (tabName == 'log') {
          tab.html('<%= escape_javascript(loading_indicator) %>');
          $j.get(source.parents("[data-log-url]").data('log-url'), {rfcId: key});
        }
      }
    }
  };
}
